import{_ as M}from"./yogurt-0baa0289.js";import{_ as z,j as F,r as i,o as H,k as Y,a as _,b as c,c as d,f as n,d as l,e as h,t as r,F as E,l as O,g as f,P as R,n as G,m as J,p as K,h as Q,q as w}from"./index-c7b8243f.js";const p=b=>(K("data-v-9cb2070d"),b=b(),Q(),b),W={class:"surface-section px-4 py-8 md:px-6 lg:px-8 border-1 surface-border border-round"},X={class:"header-text flex text-center justify-content-center mb-3"},Z={class:"text-900 font-medium text-3xl text-center mb-2 mt-2 text-center"},ee={key:0,class:"text-primary"},te={key:1},le={class:"text-900 font-medium text-3xl text-center mb-2 mt-2 ml-5"},oe={key:0,class:"text-primary"},se={key:1},ae=p(()=>l("p",{class:"mt-0 p-0 mb-5 text-900 font-medium text-2xl"},"All Products",-1)),ne={class:"grid -mt-3 -ml-3 -mr-3"},ue={class:"p-2"},ie={class:"shadow-2 p-4 surface-card border-round"},ce={class:"relative mb-3 flex"},de={class:"buttons p-button-rounded p-button-success mr-2 margin"},re=["alt"],pe={class:"flex justify-content-between align-items-center mb-3"},ve={class:"text-900 font-medium text-xl"},me={class:"font-medium text-2xl"},_e={class:"mt-0 mb-3 text-700 line-height-3"},be={class:"text-primary text-xl font-medium"},he={class:"modal"},fe={class:"field"},xe=p(()=>l("label",{for:"name"},"Name",-1)),ge={class:"field"},ye=p(()=>l("label",{for:"quantity"},"Count",-1)),ke={class:"p-inputgroup"},we={class:"field"},Pe=p(()=>l("label",{for:"quantity"},"Price",-1)),Ve={class:"p-inputgroup"},Te=p(()=>l("span",{class:"p-inputgroup-addon"},"so'm",-1)),Ce={class:"field"},Se=p(()=>l("label",{for:"count"},"Message",-1)),Ie={class:"p-float-label"},Ne={class:"flex align-items-center justify-content-center"},$e=p(()=>l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),qe={key:0},De={__name:"ProductList",setup(b){const x=F(),v=i(!1),u=i(null),e=i({}),g=i(null),y=i(null);i(null);const C=i(3),m=i(!1),S=new R,k="http://127.0.0.1:8000";H(()=>{S.getProducts().then(s=>{u.value=s.reverse(),g.value=u.value.length;let t=0;for(var a in s)t+=s[a].count;y.value=t})}),Y(()=>{(()=>u.value.slice(0,C.value))()});const I=async()=>{if(e.value.label&&e.value.label.trim()&&e.value.count){if(e.value.id){u.value[D(e.value.id)]=e.value;const s={label:e.value.label,count:e.value.count,price:e.value.price,value:e.value.label,message:e.value.message};await w({method:"PATCH",url:`${k}/edit/product/${e.value.id}/`,data:s,headers:{"Content-Type":"multipart/form-data"}}).then(t=>{console.log(t),window.location.reload()}).catch(t=>{console.log(t)}),x.add({severity:"success",summary:"Successful",detail:"Product Updated",life:3e3})}else{e.value.id=P(),e.value.code=P(),e.value.image="product-placeholder.svg",u.value.unshift(e.value);const s={label:e.value.label,count:e.value.count,price:e.value.price,value:e.value.label,message:e.value.message};await w({method:"POST",url:`${k}/product/`,data:s,headers:{"Content-Type":"multipart/form-data"}}).then(()=>{window.location.reload()}).catch(t=>console.log(t)),x.add({severity:"success",summary:"Successful",detail:"Product Created",life:3e3})}v.value=!1,e.value={}}},N=async s=>{console.log(s),u.value=u.value.filter(t=>t.id!==e.value.id),await w.delete(`${k}/delete/product/${s}/`).then(()=>{window.location.reload()}).catch(t=>console.log(t)),e.value={},m.value=!1,x.add({severity:"success",summary:"Successful",detail:"Product Deleted",life:3e3})},$=s=>{e.value=s,m.value=!0},q=s=>{e.value={...s},v.value=!0},D=s=>{let t=-1;for(let a=0;a<u.value.length;a++)if(u.value[a].id===s){t=a;break}return t},P=()=>{let s="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let a=0;a<5;a++)s+=t.charAt(Math.floor(Math.random()*t.length));return s};i([{breakpoint:"1024px",numVisible:3,numScroll:3},{breakpoint:"768px",numVisible:2,numScroll:2},{breakpoint:"560px",numVisible:1,numScroll:1}]);const B=()=>{e.value={},v.value=!0},U=()=>{v.value=!1};return(s,t)=>{const a=_("Button"),j=_("InputText"),V=_("InputNumber"),A=_("Textarea"),T=_("Dialog");return c(),d("div",W,[n(a,{label:"Tovar Yaratish",icon:"pi pi-fw pi-plus",class:"p-button-help",onClick:t[0]||(t[0]=o=>B())}),l("div",X,[l("div",Z,[h("Tovarlar turi: "),g.value?(c(),d("span",ee,r(g.value+"hil"),1)):(c(),d("span",te,"0"))]),l("div",le,[h("Tovarlar soni: "),y.value?(c(),d("span",oe,r(y.value+"ta"),1)):(c(),d("span",se,"0"))])]),ae,l("div",ne,[(c(!0),d(E,null,O(u.value,o=>(c(),d("div",{class:"col-12 md:col-6 lg:col-3 mb-5 lg:mb-0",key:o.id},[l("div",ue,[l("div",ie,[l("div",ce,[l("span",{class:"surface-card text-900 shadow-2 px-3 py-2 absolute",style:G({borderRadius:"1.5rem",top:"1rem"})}," Product ",4),l("div",de,[n(a,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:L=>q(o)},null,8,["onClick"]),n(a,{icon:"pi pi-trash",class:"p-button-warning p-button p-button-icon-only p-button-rounded p-button-success mr-2",onClick:L=>$(o)},null,8,["onClick"])])]),l("img",{src:M,class:"w-full",alt:o.label},null,8,re),l("div",pe,[l("span",ve,r(o.label),1),l("span",null,[l("span",me,r(o.count+"ta"),1)])]),l("p",_e,r(o.message),1),l("span",be,r(o.price),1)])])]))),128)),l("div",he,[n(T,{visible:v.value,"onUpdate:visible":t[5]||(t[5]=o=>v.value=o),style:{width:"450px"},header:"Tovar Sotish",modal:!0,class:"p-fluid",value:e.value},{footer:f(()=>[n(a,{label:"Bekor qilish",icon:"pi pi-times",class:"p-button-text",onClick:U}),n(a,{label:"Saqlash",icon:"pi pi-check",class:"p-button-text",onClick:I})]),default:f(()=>[l("div",fe,[xe,n(j,{placeholder:"Tovar Nomi",id:"name",modelValue:e.value.label,"onUpdate:modelValue":t[1]||(t[1]=o=>e.value.label=o),autofocus:""},null,8,["modelValue"])]),l("div",ge,[ye,l("div",null,[l("div",ke,[n(V,{id:"quantity",modelValue:e.value.count,"onUpdate:modelValue":t[2]||(t[2]=o=>e.value.count=o),integeronly:"",placeholder:"Tovar Soni"},null,8,["modelValue"])])])]),l("div",we,[Pe,l("div",null,[l("div",Ve,[n(V,{id:"quantity",modelValue:e.value.price,"onUpdate:modelValue":t[3]||(t[3]=o=>e.value.price=o),integeronly:"",placeholder:"Tovar Narhi"},null,8,["modelValue"]),Te])])]),l("div",Ce,[Se,l("span",Ie,[n(A,{inputId:"textarea",rows:"3",cols:"30",modelValue:e.value.message,"onUpdate:modelValue":t[4]||(t[4]=o=>e.value.message=o),placeholder:"message..."},null,8,["modelValue"])])])]),_:1},8,["visible","value"]),n(T,{visible:m.value,"onUpdate:visible":t[8]||(t[8]=o=>m.value=o),style:{width:"450px"},header:"Tovar o'chirish",modal:!0},{footer:f(()=>[n(a,{label:"Yo'q",icon:"pi pi-times",class:"p-button-text",onClick:t[6]||(t[6]=o=>m.value=!1)}),n(a,{label:"Ha",icon:"pi pi-check",class:"p-button-text",onClick:t[7]||(t[7]=o=>N(e.value.id))})]),default:f(()=>[l("div",Ne,[$e,e.value?(c(),d("span",qe,[h("Are you sure you want to delete "),l("b",null,r(e.value.label),1),h("?")])):J("",!0)])]),_:1},8,["visible"])])])])}}},je=z(De,[["__scopeId","data-v-9cb2070d"]]);export{je as default};
